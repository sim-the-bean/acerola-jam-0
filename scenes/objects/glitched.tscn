[gd_scene load_steps=13 format=3 uid="uid://d1yldm36qcj08"]

[ext_resource type="Script" path="res://scripts/glitched.gd" id="1_atq5k"]
[ext_resource type="PackedScene" uid="uid://ntyjgfrwrkcf" path="res://scenes/components/effect_component.tscn" id="1_b61yb"]
[ext_resource type="Material" uid="uid://bif0vwujua2ba" path="res://resources/materials/glitched.tres" id="2_ux81n"]
[ext_resource type="PackedScene" uid="uid://cf8tm3pqh5qqf" path="res://scenes/components/kill_component.tscn" id="5_7hngu"]
[ext_resource type="PackedScene" uid="uid://sx2h6j67s8yu" path="res://scenes/components/hover_component.tscn" id="6_67b7w"]
[ext_resource type="PackedScene" uid="uid://mq05dcn7se8o" path="res://scenes/components/ui_hint_component.tscn" id="7_0sivp"]
[ext_resource type="PackedScene" uid="uid://d0e8xg2vjvj2m" path="res://scenes/components/grab_component.tscn" id="8_vhty1"]

[sub_resource type="PhysicsMaterial" id="PhysicsMaterial_dbufy"]
resource_local_to_scene = true
bounce = 0.5

[sub_resource type="BoxShape3D" id="BoxShape3D_ormki"]
resource_local_to_scene = true
size = Vector3(0.5, 0.5, 0.5)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_v8vh0"]

[sub_resource type="BoxMesh" id="BoxMesh_y5oox"]
resource_local_to_scene = true
material = SubResource("StandardMaterial3D_v8vh0")
size = Vector3(0.5, 0.5, 0.5)

[sub_resource type="BoxShape3D" id="BoxShape3D_ulw2b"]
resource_local_to_scene = true
size = Vector3(0.51, 0.51, 0.51)

[node name="Object" type="RigidBody3D" groups=["glitched", "grabbable"]]
collision_layer = 173
physics_material_override = SubResource("PhysicsMaterial_dbufy")
max_contacts_reported = 1
contact_monitor = true
linear_damp = 1.0
angular_damp = 1.0
script = ExtResource("1_atq5k")
can_be_glitched = true
chromatic_aberration_strength = Vector3(0.5, 0.2, 0.2)
glitched_material = ExtResource("2_ux81n")

[node name="Collider" type="CollisionShape3D" parent="."]
unique_name_in_owner = true
shape = SubResource("BoxShape3D_ormki")

[node name="Mesh" type="MeshInstance3D" parent="."]
unique_name_in_owner = true
mesh = SubResource("BoxMesh_y5oox")

[node name="KillBox" type="Area3D" parent="."]
unique_name_in_owner = true
collision_layer = 0
collision_mask = 35

[node name="CollisionShape3D" type="CollisionShape3D" parent="KillBox"]
shape = SubResource("BoxShape3D_ulw2b")

[node name="RayCast" type="RayCast3D" parent="."]
unique_name_in_owner = true

[node name="EffectComponent" parent="." instance=ExtResource("1_b61yb")]

[node name="KillComponent" parent="." instance=ExtResource("5_7hngu")]
scale_on_kill = true
scale_target = NodePath("../Mesh")

[node name="HoverComponent" parent="." instance=ExtResource("6_67b7w")]

[node name="UiHintComponentGrab" parent="." instance=ExtResource("7_0sivp")]
hint_type = 2
hud_type = 1
hint = "Grab"
show = false

[node name="UiHintComponentDrop" parent="." instance=ExtResource("7_0sivp")]
hint_type = 2
hud_type = 1
hint = "Drop"
show = false

[node name="GrabComponent" parent="." instance=ExtResource("8_vhty1")]

[node name="UiHintComponentThrow" parent="." instance=ExtResource("7_0sivp")]
hint_type = 3
hud_type = 1
hint = "Throw"
show = false

[node name="UiHintComponentRotateLeft" parent="." instance=ExtResource("7_0sivp")]
hint_type = 6
hud_type = 1
hint = "Rotate Left"
show = false

[node name="UiHintComponentRotateRight" parent="." instance=ExtResource("7_0sivp")]
hint_type = 7
hud_type = 1
hint = "Rotate Right"
show = false

[node name="LandSound" type="AudioStreamPlayer3D" parent="."]
unique_name_in_owner = true
max_polyphony = 3

[connection signal="body_entered" from="." to="." method="_on_body_entered"]
[connection signal="child_entered_tree" from="." to="." method="_on_child_entered_tree"]
[connection signal="child_exiting_tree" from="." to="." method="_on_child_exiting_tree"]
[connection signal="body_entered" from="KillBox" to="." method="_on_kill_box_body_entered"]
[connection signal="hover_entered" from="HoverComponent" to="UiHintComponentGrab" method="set_show"]
[connection signal="hover_exited" from="HoverComponent" to="UiHintComponentGrab" method="set_hide"]
[connection signal="grab_begin" from="GrabComponent" to="UiHintComponentGrab" method="set_hide"]
[connection signal="grab_begin" from="GrabComponent" to="UiHintComponentDrop" method="set_show"]
[connection signal="grab_begin" from="GrabComponent" to="UiHintComponentThrow" method="set_show"]
[connection signal="grab_begin" from="GrabComponent" to="UiHintComponentRotateLeft" method="set_show"]
[connection signal="grab_begin" from="GrabComponent" to="UiHintComponentRotateRight" method="set_show"]
[connection signal="grab_end" from="GrabComponent" to="UiHintComponentDrop" method="set_hide"]
[connection signal="grab_end" from="GrabComponent" to="UiHintComponentThrow" method="set_hide"]
[connection signal="grab_end" from="GrabComponent" to="UiHintComponentRotateLeft" method="set_hide"]
[connection signal="grab_end" from="GrabComponent" to="UiHintComponentRotateRight" method="set_hide"]
